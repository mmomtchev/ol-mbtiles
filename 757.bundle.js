"use strict";(self.webpackChunkol_mbtiles=self.webpackChunkol_mbtiles||[]).push([[757],{7757:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var r=o(8854),n=o(8266),i=o(2479),s=o(9090),l=o(9731),a=o(6263),c=o(8661),u=o(5901),d=o(5917);function h(){return new r.Z({target:"map",layers:[new i.Z({source:new n.Z}),new i.Z({source:new a.Z}),new l.Z({source:new u.B({url:"https://velivole.b-cdn.net/mbtiles/countries.mbtiles"}),style:d.kY})],view:new s.ZP({center:(0,c.mi)([12,50]),zoom:6})})}},5917:(e,t,o)=>{o.d(t,{Hh:()=>Z,Xu:()=>h,d_:()=>w,kY:()=>c,oj:()=>m,xl:()=>f,y8:()=>a});var r=o(7539),n=o(283),i=o(1345),s=o(8958),l=o(1280);function a(e,t){let o,a;switch(e){case 0:o=6,a="2em";break;case 1:o=5,a="1.2em";break;case 2:o=3,a="0.8em";break;default:o=1,a="0.5em"}a+=" helvetica, sans-serif";const c="#00007f";return new r.ZP({image:new n.Z({fill:new i.Z({color:c}),radius:o,stroke:new s.Z({color:c,width:o})}),text:new l.Z({font:a,text:t.get("n"),fill:new i.Z({color:"#ffffff"}),stroke:new s.Z({color:c,width:2})})})}const c=new r.ZP({stroke:new s.Z({color:"blue",width:2})}),u={},d={motorway:"#776",trunk:"#ccb",highway:"#f39"},h=new r.ZP({fill:new i.Z({color:"#666"}),stroke:new s.Z({color:"#444",width:1})}),w=new r.ZP({fill:new i.Z({color:"#9db9e8"})}),m=new r.ZP({stroke:new s.Z({color:"#8B008B",width:2})}),f=function(e){const t=e.get("class"),o=e.get("railway"),n=e.get("sort_key"),i=t+"/"+o+"/"+n;let l=u[i];if(!l){let e,a;o?(e="#7de",a=1):(e=d[t],a="highway"==t?1.5:1),l=new r.ZP({stroke:new s.Z({color:e,width:a}),zIndex:n}),u[i]=l}return l},p=new r.ZP({image:new n.Z({radius:5,fill:new i.Z({color:"#000080"})})}),g=new s.Z({color:"white",width:2}),Z=function(e){if("country"==e.get("class"))return null;if(e.get("name")){const t=p.clone();return t.setText(new l.Z({text:e.get("name"),offsetY:-5,font:"bold 16px sans-serif",stroke:g})),t}}},5901:(e,t,o)=>{o.d(t,{B:()=>p});var r=o(2891),n=o.n(r),i=o(7205),s=o(3614),l=o.n(s),a=o(8929),c=o(7885),u=o(9646),d=o(9619),h=o(3433),w=o(8661);class m extends u.ZP{constructor(e){var t,o,r;super(),e=e||{},this.dataProjection=new d.Z({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:h.ZP,this.geometryName_=null!==(t=e.geometryName)&&void 0!==t?t:"Geometry",this.layers_=null!==(o=e.layers)&&void 0!==o?o:null,this.idProperty_=e.idProperty,this.extent=null!==(r=e.extent)&&void 0!==r?r:4096,this.supportedMediaTypes=["application/vnd-mbtiles"]}readFeature(e,t){const o=e.properties;let r;this.idProperty_?(r=o[this.idProperty_],delete o[this.idProperty_]):r=e.id;const n=e.loadGeometry(),i=[],s=[],l=m.MBTypes[n.length>1?"multi":"mono"][e.type];if("Unknown"===l)return null;for(let e=0;e<n.length;e++)if(0!=n[e].length){for(let t=0;t<n[e].length;t++)i.push(n[e][t].x,n[e][t].y);s.push(i.length)}const a=new this.featureClass_(l,i,s,o,r);return a.transform(t.dataProjection),a}readFeatures(e,t){const o=this.layers_,r=[],n=new a.VectorTile(new(l())(c.ec(e)));t=this.adaptOptions(t);const i=(0,w.U2)(t.dataProjection);i.setWorldExtent(t.extent),i.setExtent([0,0,this.extent,this.extent]),t.dataProjection=i;for(const e of Object.keys(n.layers)){if(o&&!o.includes(e))continue;const i=n.layers[e];for(let o=0;o<i.length;o++){const n=i.feature(o),s=this.readFeature(n,t);s.getProperties().layer=e,r.push(s)}}return r}readProjection(){return this.dataProjection}}m.MBTypes={mono:["Unknown","Point","LineString","Polygon"],multi:["Unknown","MultiPoint","MultiLineString","Polygon"]};const f=null!==n()&&void 0!==n()?n():r;class p extends i.Z{constructor(e){var t,o;super(Object.assign(Object.assign({},e),{url:void 0,format:new m({layers:e.layers}),tileUrlFunction:e=>`${e[0]}:${e[1]}:${e[2]}`})),this.setTileLoadFunction(this.tileLoader.bind(this));const r={from:"inline",config:{serverMode:"full",requestChunkSize:1024,url:e.url}};this.worker=[];for(let n=0;n<(null!==(t=e.sqlWorkers)&&void 0!==t?t:4);n++)this.worker[n]=f.createDbWorker([r],p.workerUrl.toString(),p.wasmUrl.toString(),null!==(o=e.maxSingleTransfer)&&void 0!==o?o:10485760);this.currentWorker=0,this.metadata=this.worker[this.currentWorker++%this.worker.length].then((e=>e.db.query('SELECT name,value FROM metadata WHERE name="maxzoom" or name="minzoom"'))).then((t=>{if(t&&2==t.length){const o=t.reduce(((e,t)=>(e[t.name]=t.value,e)),{});return console.debug("Loaded metadata",o),e.maxZoom==o.maxzoom&&e.minZoom==o.minzoom||console.warn(`minZoom/maxZoom ${o.minzoom}/${o.maxzoom} of retrieved MBTiles do not match Openlayers configuration ${e.minZoom}/${e.maxZoom}`),o}throw new Error("Could not load metadata")})).catch((e=>(console.warn(e),null)))}tileLoader(e,t){console.debug("loading tile",[e.tileCoord[0],e.tileCoord[1],e.tileCoord[2]]),e.setLoader(((t,o,r)=>{this.worker[this.currentWorker++%this.worker.length].then((t=>t.db.query("SELECT tile_data FROM tiles WHERE zoom_level = ? AND tile_column = ? AND tile_row = ?",[e.tileCoord[0],e.tileCoord[1],(1<<e.tileCoord[0])-1-e.tileCoord[2]]))).then((o=>{if(o&&o[0]&&o[0].tile_data){const n=e.getFormat().readFeatures(o[0].tile_data,{extent:t,featureProjection:r});return e.setFeatures(n),void e.onLoad(n,r)}throw new Error(`No data for ${e.tileCoord}`)})).catch((t=>{console.warn(t),e.onError()}))}))}destroy(){for(const e of this.worker)e.then((e=>{e.release()}))}}p.workerUrl=new URL(o(421),o.b),p.wasmUrl=new URL(o(3611),o.b)},8266:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(6841);class n extends r.Z{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const o=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",r=void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:o,interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const i=n}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RENGSixNQUFNQyxVQUFZLElBSWhCekcsWUFBWUMsR0FHVixJQUFJeUcsRUFFRkEsT0FEMkJwRCxLQUg3QnJELEVBQVVBLEdBQVcsQ0FBQyxHQUdWeUcsYUFDS3pHLEVBQVF5RyxhQUVSLENBakRuQiw0R0FvREUsTUFBTUMsT0FDb0JyRCxJQUF4QnJELEVBQVEwRyxZQUE0QjFHLEVBQVEwRyxZQUFjLFlBRXREakosT0FDWTRGLElBQWhCckQsRUFBUXZDLElBQ0p1QyxFQUFRdkMsSUFDUixpREFFTndDLE1BQU0sQ0FDSndHLGFBQWNBLEVBQ2RFLHlCQUF5QixFQUN6QkMsVUFBVzVHLEVBQVE0RyxVQUNuQkYsWUFBYUEsRUFDYkcsWUFBYTdHLEVBQVE2RyxZQUNyQjFCLGFBQTZCOUIsSUFBcEJyRCxFQUFRbUYsUUFBd0JuRixFQUFRbUYsUUFBVSxHQUMzRDJCLFlBQTJCekQsSUFBbkJyRCxFQUFROEcsUUFBdUI5RyxFQUFROEcsT0FDL0NDLDJCQUE0Qi9HLEVBQVErRywyQkFDcENDLGlCQUFrQmhILEVBQVFnSCxpQkFDMUJDLFdBQVlqSCxFQUFRaUgsV0FDcEJ4SixJQUFLQSxFQUNMeUosTUFBT2xILEVBQVFrSCxNQUNmQyxXQUFZbkgsRUFBUW1ILFlBRXhCLEVBR0YsUyIsInNvdXJjZXMiOlsid2VicGFjazovL29sLW1idGlsZXMvLi9leGFtcGxlcy9jb2RlL2tsb2thbnRlY2gudHMiLCJ3ZWJwYWNrOi8vb2wtbWJ0aWxlcy8uL2V4YW1wbGVzL3N0eWxlLnRzIiwid2VicGFjazovL29sLW1idGlsZXMvLi9zcmMvbWJ0aWxlcy1mb3JtYXQudHMiLCJ3ZWJwYWNrOi8vb2wtbWJ0aWxlcy8uL3NyYy9tYnRpbGVzLXNvdXJjZS50cyIsIndlYnBhY2s6Ly9vbC1tYnRpbGVzLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9PU00uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAuanMnO1xuaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNLmpzJztcbmltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZS5qcyc7XG5pbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3LmpzJztcbmltcG9ydCBWZWN0b3JUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVmVjdG9yVGlsZSc7XG5pbXBvcnQgVGlsZURlYnVnIGZyb20gJ29sL3NvdXJjZS9UaWxlRGVidWcnO1xuaW1wb3J0IHsgZnJvbUxvbkxhdCB9IGZyb20gJ29sL3Byb2onO1xuXG5pbXBvcnQgeyBNQlRpbGVzU291cmNlIH0gZnJvbSAnb2wtbWJ0aWxlcyc7XG5pbXBvcnQgeyBzdHlsZUJvcmRlciB9IGZyb20gJy4uL3N0eWxlJztcblxuLy8gTUJUaWxlcyBmcm9tXG4vLyBodHRwczovL2dpdGh1Yi5jb20va2xva2FudGVjaC92ZWN0b3ItdGlsZXMtc2FtcGxlXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5ldyBNYXAoe1xuICAgIHRhcmdldDogJ21hcCcsXG4gICAgbGF5ZXJzOiBbXG4gICAgICBuZXcgVGlsZUxheWVyKHtcbiAgICAgICAgc291cmNlOiBuZXcgT1NNKCksXG4gICAgICB9KSxcbiAgICAgIG5ldyBUaWxlTGF5ZXIoe1xuICAgICAgICBzb3VyY2U6IG5ldyBUaWxlRGVidWcoKVxuICAgICAgfSksXG4gICAgICBuZXcgVmVjdG9yVGlsZUxheWVyKHtcbiAgICAgICAgc291cmNlOiBuZXcgTUJUaWxlc1NvdXJjZSh7XG4gICAgICAgICAgdXJsOiAnaHR0cHM6Ly92ZWxpdm9sZS5iLWNkbi5uZXQvbWJ0aWxlcy9jb3VudHJpZXMubWJ0aWxlcydcbiAgICAgICAgfSksXG4gICAgICAgIHN0eWxlOiBzdHlsZUJvcmRlclxuICAgICAgfSlcbiAgICBdLFxuICAgIHZpZXc6IG5ldyBWaWV3KHtcbiAgICAgIGNlbnRlcjogZnJvbUxvbkxhdChbMTIsIDUwXSksXG4gICAgICB6b29tOiA2XG4gICAgfSksXG4gIH0pO1xufSIsImltcG9ydCBGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUnO1xuaW1wb3J0IHsgU3R5bGUsIFRleHQsIEZpbGwsIFN0cm9rZSwgQ2lyY2xlIH0gZnJvbSAnb2wvc3R5bGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVUb3duKHNpemU6IG51bWJlciwgZmVhdHVyZTogRmVhdHVyZSk6IFN0eWxlIHtcbiAgbGV0IHdpZHRoOiBudW1iZXI7XG4gIGxldCBmb250OiBzdHJpbmc7XG4gIHN3aXRjaCAoc2l6ZSkge1xuICAgIGNhc2UgMDpcbiAgICAgIHdpZHRoID0gNjtcbiAgICAgIGZvbnQgPSAnMmVtJztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIHdpZHRoID0gNTtcbiAgICAgIGZvbnQgPSAnMS4yZW0nO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgd2lkdGggPSAzO1xuICAgICAgZm9udCA9ICcwLjhlbSc7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgd2lkdGggPSAxO1xuICAgICAgZm9udCA9ICcwLjVlbSc7XG4gICAgICBicmVhaztcbiAgfVxuICBmb250ICs9ICcgaGVsdmV0aWNhLCBzYW5zLXNlcmlmJztcbiAgY29uc3QgY29sb3IxID0gJyMwMDAwN2YnO1xuICBjb25zdCBjb2xvcjIgPSAnI2ZmZmZmZic7XG5cbiAgY29uc3Qgc3R5bGUgPSBuZXcgU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgQ2lyY2xlKHtcbiAgICAgIGZpbGw6IG5ldyBGaWxsKHtcbiAgICAgICAgY29sb3I6IGNvbG9yMSxcbiAgICAgIH0pLFxuICAgICAgcmFkaXVzOiB3aWR0aCxcbiAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgICAgIGNvbG9yOiBjb2xvcjEsXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIH0pLFxuICAgIH0pLFxuICAgIHRleHQ6IG5ldyBUZXh0KHtcbiAgICAgIGZvbnQ6IGZvbnQsXG4gICAgICB0ZXh0OiBmZWF0dXJlLmdldCgnbicpLFxuICAgICAgZmlsbDogbmV3IEZpbGwoe1xuICAgICAgICBjb2xvcjogY29sb3IyXG4gICAgICB9KSxcbiAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgICAgIGNvbG9yOiBjb2xvcjEsXG4gICAgICAgIHdpZHRoOiAyXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xuICByZXR1cm4gc3R5bGU7XG59XG5cbmV4cG9ydCBjb25zdCBzdHlsZUJvcmRlciA9IG5ldyBTdHlsZSh7XG4gIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgY29sb3I6ICdibHVlJyxcbiAgICB3aWR0aDogMlxuICB9KVxufSk7XG5cblxuLy8gU3R5bGVzIGluc3BpcmVkIGZyb20gaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZXhhbXBsZXMvb3NtLXZlY3Rvci10aWxlcy5odG1sXG5jb25zdCByb2FkU3R5bGVDYWNoZSA9IHt9O1xuY29uc3Qgcm9hZENvbG9yID0ge1xuICAnbW90b3J3YXknOiAnIzc3NicsXG4gICd0cnVuayc6ICcjY2NiJyxcbiAgJ2hpZ2h3YXknOiAnI2YzOScsXG59O1xuZXhwb3J0IGNvbnN0IGJ1aWxkaW5nU3R5bGUgPSBuZXcgU3R5bGUoe1xuICBmaWxsOiBuZXcgRmlsbCh7XG4gICAgY29sb3I6ICcjNjY2J1xuICB9KSxcbiAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHtcbiAgICBjb2xvcjogJyM0NDQnLFxuICAgIHdpZHRoOiAxLFxuICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHdhdGVyU3R5bGUgPSBuZXcgU3R5bGUoe1xuICBmaWxsOiBuZXcgRmlsbCh7XG4gICAgY29sb3I6ICcjOWRiOWU4JyxcbiAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBib3VuZGFyeVN0eWxlID0gbmV3IFN0eWxlKHtcbiAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHtcbiAgICBjb2xvcjogJyM4QjAwOEInLFxuICAgIHdpZHRoOiAyLFxuICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJvYWRTdHlsZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIGNvbnN0IGtpbmQgPSBmZWF0dXJlLmdldCgnY2xhc3MnKTtcbiAgY29uc3QgcmFpbHdheSA9IGZlYXR1cmUuZ2V0KCdyYWlsd2F5Jyk7XG4gIGNvbnN0IHNvcnRfa2V5ID0gZmVhdHVyZS5nZXQoJ3NvcnRfa2V5Jyk7XG4gIGNvbnN0IHN0eWxlS2V5ID0ga2luZCArICcvJyArIHJhaWx3YXkgKyAnLycgKyBzb3J0X2tleTtcbiAgbGV0IHN0eWxlID0gcm9hZFN0eWxlQ2FjaGVbc3R5bGVLZXldO1xuICBpZiAoIXN0eWxlKSB7XG4gICAgbGV0IGNvbG9yLCB3aWR0aDtcbiAgICBpZiAocmFpbHdheSkge1xuICAgICAgY29sb3IgPSAnIzdkZSc7XG4gICAgICB3aWR0aCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbG9yID0gcm9hZENvbG9yW2tpbmRdO1xuICAgICAgd2lkdGggPSBraW5kID09ICdoaWdod2F5JyA/IDEuNSA6IDE7XG4gICAgfVxuICAgIHN0eWxlID0gbmV3IFN0eWxlKHtcbiAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7XG4gICAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgfSksXG4gICAgICB6SW5kZXg6IHNvcnRfa2V5LFxuICAgIH0pO1xuICAgIHJvYWRTdHlsZUNhY2hlW3N0eWxlS2V5XSA9IHN0eWxlO1xuICB9XG4gIHJldHVybiBzdHlsZTtcbn07XG5jb25zdCBwbGFjZUJhc2UgPSBuZXcgU3R5bGUoe1xuICBpbWFnZTogbmV3IENpcmNsZSh7XG4gICAgcmFkaXVzOiA1LFxuICAgIGZpbGw6IG5ldyBGaWxsKHtcbiAgICAgIGNvbG9yOiAnIzAwMDA4MCdcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCB0ZXh0U3Ryb2tlID0gbmV3IFN0cm9rZSh7XG4gIGNvbG9yOiAnd2hpdGUnLFxuICB3aWR0aDogMlxufSk7XG5leHBvcnQgY29uc3QgcGxhY2VTdHlsZSA9IGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gIGlmIChmZWF0dXJlLmdldCgnY2xhc3MnKSA9PSAnY291bnRyeScpXG4gICAgcmV0dXJuIG51bGw7XG4gIGlmIChmZWF0dXJlLmdldCgnbmFtZScpKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBwbGFjZUJhc2UuY2xvbmUoKTtcbiAgICBzdHlsZS5zZXRUZXh0KG5ldyBUZXh0KHtcbiAgICAgIHRleHQ6IGZlYXR1cmUuZ2V0KCduYW1lJyksXG4gICAgICBvZmZzZXRZOiAtNSxcbiAgICAgIGZvbnQ6ICdib2xkIDE2cHggc2Fucy1zZXJpZicsXG4gICAgICBzdHJva2U6IHRleHRTdHJva2VcbiAgICB9KSk7XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG59OyIsImltcG9ydCBQcm90b2J1ZiBmcm9tICdwYmYnO1xuaW1wb3J0IHsgVmVjdG9yVGlsZSwgVmVjdG9yVGlsZUZlYXR1cmUgfSBmcm9tICdAbWFwYm94L3ZlY3Rvci10aWxlJztcbmltcG9ydCAqIGFzIHBha28gZnJvbSAncGFrbyc7XG5cbmltcG9ydCBGZWF0dXJlRm9ybWF0LCB7IFJlYWRPcHRpb25zIH0gZnJvbSAnb2wvZm9ybWF0L0ZlYXR1cmUuanMnO1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnb2wvcHJvai9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBSZW5kZXJGZWF0dXJlIGZyb20gJ29sL3JlbmRlci9GZWF0dXJlLmpzJztcbmltcG9ydCB7IEZlYXR1cmVMaWtlIH0gZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJ29sL3Byb2ouanMnO1xuaW1wb3J0IHsgVHlwZSB9IGZyb20gJ29sL2dlb20vR2VvbWV0cnknO1xuXG5kZWNsYXJlIG1vZHVsZSAnQG1hcGJveC92ZWN0b3ItdGlsZScge1xuICBpbnRlcmZhY2UgVmVjdG9yVGlsZUZlYXR1cmUge1xuICAgIHRvR2VvSlNPTih4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCBwcm9qZWN0PzogKHh5OiBbbnVtYmVyLCBudW1iZXJdKSA9PiBbbnVtYmVyLCBudW1iZXJdKTogR2VvSlNPTi5GZWF0dXJlO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XG4gIGxheWVycz86IHN0cmluZ1tdO1xuICBmZWF0dXJlQ2xhc3M/OiB0eXBlb2YgUmVuZGVyRmVhdHVyZTtcbiAgZ2VvbWV0cnlOYW1lPzogc3RyaW5nO1xuICBpZFByb3BlcnR5Pzogc3RyaW5nO1xuICBleHRlbnQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBNQlRpbGVzRm9ybWF0IGV4dGVuZHMgRmVhdHVyZUZvcm1hdCB7XG4gIGRhdGFQcm9qZWN0aW9uOiBQcm9qZWN0aW9uO1xuICBwcml2YXRlIGZlYXR1cmVDbGFzc186IHR5cGVvZiBSZW5kZXJGZWF0dXJlO1xuICBwcml2YXRlIGdlb21ldHJ5TmFtZV86IHN0cmluZztcbiAgcHJpdmF0ZSBsYXllcnNfOiBzdHJpbmdbXSB8IG51bGw7XG4gIHByaXZhdGUgaWRQcm9wZXJ0eV86IHN0cmluZztcbiAgc3VwcG9ydGVkTWVkaWFUeXBlczogc3RyaW5nW107XG4gIGV4dGVudDogbnVtYmVyO1xuICBzdGF0aWMgTUJUeXBlcyA9IHtcbiAgICBtb25vOiBbJ1Vua25vd24nLCAnUG9pbnQnLCAnTGluZVN0cmluZycsICdQb2x5Z29uJyBdLFxuICAgIG11bHRpOiBbJ1Vua25vd24nLCAnTXVsdGlQb2ludCcsICdNdWx0aUxpbmVTdHJpbmcnLCAnUG9seWdvbiddXG4gICB9IGFzIFJlY29yZDwnbW9ubycgfCAnbXVsdGknLCAoVHlwZSB8ICdVbmtub3duJylbXT47XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICB0aGlzLmRhdGFQcm9qZWN0aW9uID0gbmV3IFByb2plY3Rpb24oe1xuICAgICAgY29kZTogJycsXG4gICAgICB1bml0czogJ3RpbGUtcGl4ZWxzJyxcbiAgICB9KTtcblxuICAgIHRoaXMuZmVhdHVyZUNsYXNzXyA9IG9wdGlvbnMuZmVhdHVyZUNsYXNzID8gb3B0aW9ucy5mZWF0dXJlQ2xhc3MgOiBSZW5kZXJGZWF0dXJlO1xuICAgIHRoaXMuZ2VvbWV0cnlOYW1lXyA9IG9wdGlvbnMuZ2VvbWV0cnlOYW1lID8/ICdHZW9tZXRyeSc7XG4gICAgdGhpcy5sYXllcnNfID0gb3B0aW9ucy5sYXllcnMgPz8gbnVsbDtcbiAgICB0aGlzLmlkUHJvcGVydHlfID0gb3B0aW9ucy5pZFByb3BlcnR5O1xuICAgIHRoaXMuZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQgPz8gNDA5NjtcblxuICAgIC8qKlxuICAgICAqIEFzIHRoaXMgaXMgdGhlIHZlcnkgZmlyc3QgdGltZSBNQlRpbGVzIHdpbGwgYmUgZGlzdHJpYnV0ZWQgYnkgSFRUUFxuICAgICAqIHRoZXJlIGlzIHN0aWxsIG5vIG9mZmljaWFsIE1JTUUgdHlwZVxuICAgICAqL1xuICAgIHRoaXMuc3VwcG9ydGVkTWVkaWFUeXBlcyA9IFtcbiAgICAgICdhcHBsaWNhdGlvbi92bmQtbWJ0aWxlcydcbiAgICBdO1xuICB9XG5cbiAgcmVhZEZlYXR1cmUoc291cmNlOiBWZWN0b3JUaWxlRmVhdHVyZSwgb3B0aW9ucz86IFJlYWRPcHRpb25zKTogRmVhdHVyZUxpa2Uge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBzb3VyY2UucHJvcGVydGllcztcblxuICAgIGxldCBpZDogc3RyaW5nIHwgbnVtYmVyO1xuICAgIGlmICghdGhpcy5pZFByb3BlcnR5Xykge1xuICAgICAgaWQgPSBzb3VyY2UuaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlkID0gcHJvcGVydGllc1t0aGlzLmlkUHJvcGVydHlfXSBhcyBzdHJpbmcgfCBudW1iZXI7XG4gICAgICBkZWxldGUgcHJvcGVydGllc1t0aGlzLmlkUHJvcGVydHlfXTtcbiAgICB9XG4gICAgY29uc3QgcG9pbnRzID0gc291cmNlLmxvYWRHZW9tZXRyeSgpO1xuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IFtdIGFzIG51bWJlcltdO1xuICAgIGNvbnN0IGVuZHMgPSBbXSBhcyBudW1iZXJbXTtcblxuICAgIGNvbnN0IHR5cGU6IFR5cGUgfCAnVW5rbm93bicgPSBNQlRpbGVzRm9ybWF0Lk1CVHlwZXNbcG9pbnRzLmxlbmd0aCA+IDEgPyAnbXVsdGknIDogJ21vbm8nXVtzb3VyY2UudHlwZV07XG4gICAgaWYgKHR5cGUgPT09ICdVbmtub3duJylcbiAgICAgIHJldHVybiBudWxsO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwb2ludHNbaV0ubGVuZ3RoID09IDApXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwb2ludHNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLnB1c2gocG9pbnRzW2ldW2pdLngsIHBvaW50c1tpXVtqXS55KTtcbiAgICAgIH1cbiAgICAgIGVuZHMucHVzaChmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBjb25zdCBmZWF0dXJlID0gbmV3IHRoaXMuZmVhdHVyZUNsYXNzXyh0eXBlLCBmbGF0Q29vcmRpbmF0ZXMsIGVuZHMsIHByb3BlcnRpZXMsIGlkKTtcbiAgICBmZWF0dXJlLnRyYW5zZm9ybShvcHRpb25zLmRhdGFQcm9qZWN0aW9uKTtcblxuICAgIHJldHVybiBmZWF0dXJlO1xuICB9XG5cbiAgcmVhZEZlYXR1cmVzKHNvdXJjZTogQXJyYXlCdWZmZXIsIG9wdGlvbnM/OiBSZWFkT3B0aW9ucyk6IEZlYXR1cmVMaWtlW10ge1xuICAgIGNvbnN0IGxheWVycyA9IHRoaXMubGF5ZXJzXztcblxuICAgIGNvbnN0IGZlYXR1cmVzOiBGZWF0dXJlTGlrZVtdID0gW107XG4gICAgY29uc3QgdGlsZSA9IG5ldyBWZWN0b3JUaWxlKG5ldyBQcm90b2J1ZihwYWtvLnVuZ3ppcChzb3VyY2UpKSk7XG4gICAgb3B0aW9ucyA9IHRoaXMuYWRhcHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGRhdGFQcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihvcHRpb25zLmRhdGFQcm9qZWN0aW9uKTtcbiAgICBkYXRhUHJvamVjdGlvbi5zZXRXb3JsZEV4dGVudChvcHRpb25zLmV4dGVudCk7XG4gICAgZGF0YVByb2plY3Rpb24uc2V0RXh0ZW50KFswLCAwLCB0aGlzLmV4dGVudCwgdGhpcy5leHRlbnRdKTtcbiAgICBvcHRpb25zLmRhdGFQcm9qZWN0aW9uID0gZGF0YVByb2plY3Rpb247XG5cbiAgICBmb3IgKGNvbnN0IGxheWVyTmFtZSBvZiBPYmplY3Qua2V5cyh0aWxlLmxheWVycykpIHtcbiAgICAgIGlmIChsYXllcnMgJiYgIWxheWVycy5pbmNsdWRlcyhsYXllck5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbCA9IHRpbGUubGF5ZXJzW2xheWVyTmFtZV07XG4gICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgY29uc3QgdmVjdG9yRmVhdHVyZSA9IGwuZmVhdHVyZShpZHgpO1xuICAgICAgICBjb25zdCBmZWF0dXJlID0gdGhpcy5yZWFkRmVhdHVyZSh2ZWN0b3JGZWF0dXJlLCBvcHRpb25zKTtcbiAgICAgICAgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkubGF5ZXIgPSBsYXllck5hbWU7XG4gICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9XG5cbiAgcmVhZFByb2plY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YVByb2plY3Rpb247XG4gIH1cblxufSIsIi8vIFdoeSBpcyB0aGlzIGhvcnJvciBuZWNlc3Nhcnk/XG4vLyBCZWNhdXNlIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvY2pzLW1vZHVsZS1sZXhlci9wdWxsLzI0XG5pbXBvcnQgc3FsaHR0cERlZmF1bHQgZnJvbSAnc3FsLmpzLWh0dHB2ZnMnO1xuaW1wb3J0ICogYXMgc3FsaHR0cEFsbCBmcm9tICdzcWwuanMtaHR0cHZmcyc7XG5jb25zdCBzcWxodHRwID0gc3FsaHR0cERlZmF1bHQgPz8gc3FsaHR0cEFsbDtcbmltcG9ydCB0eXBlIHsgV29ya2VySHR0cHZmcyB9IGZyb20gJ3NxbC5qcy1odHRwdmZzJztcbmltcG9ydCB7IFNwbGl0RmlsZUNvbmZpZ1B1cmUgfSBmcm9tICdzcWwuanMtaHR0cHZmcy9kaXN0L3NxbGl0ZS53b3JrZXInO1xuXG5pbXBvcnQgVmVjdG9yVGlsZVNvdXJjZSwgeyBPcHRpb25zIGFzIFZlY3RvclRpbGVPcHRpb25zIH0gZnJvbSAnb2wvc291cmNlL1ZlY3RvclRpbGUuanMnO1xuaW1wb3J0IFZlY3RvclRpbGUgZnJvbSAnb2wvVmVjdG9yVGlsZS5qcyc7XG5pbXBvcnQgeyBUaWxlQ29vcmQgfSBmcm9tICdvbC90aWxlY29vcmQuanMnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZS5qcyc7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gJ29sL2dlb20uanMnO1xuXG5pbXBvcnQgeyBNQlRpbGVzRm9ybWF0IH0gZnJvbSAnLi9tYnRpbGVzLWZvcm1hdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyBleHRlbmRzIFZlY3RvclRpbGVPcHRpb25zIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiBwYXJhbGxlbCB3b3JrZXJzIHRvIHVzZSBmb3IgcmV0cmlldmluZyB0aWxlcywgQGRlZmF1bHQgNFxuICAgKi9cbiAgc3FsV29ya2Vycz86IG51bWJlcjtcbiAgLyoqXG4gICAqIExpc3Qgb2YgbGF5ZXIgbmFtZXMgdG8gc2VsZWN0aXZlbHkgaW5jbHVkZSwgQGRlZmF1bHQgZXZlcnl0aGluZ1xuICAgKi9cbiAgbGF5ZXJzPzogc3RyaW5nW107XG4gIC8qKlxuICAgKiBNYXhpbXVtIGFtb3VudCBvZiBieXRlcyB0byB0cmFuc2ZlciBmb3IgYSBzaW5nbGUgdGlsZS5cbiAgICogVGhpcyBpcyBhIHByb3RlY3Rpb24gYWdhaW5zdCByZXF1ZXN0aW5nIGZyb20gYSBkYXRhYmFzZSB3aXRob3V0IGluZGV4LlxuICAgKiBAZGVmYXVsdCAxMDQ4NTc2MFxuICAgKi9cbiAgbWF4U2luZ2xlVHJhbnNmZXI/OiBudW1iZXI7XG5cbiAgdGlsZVVybEZ1bmN0aW9uPzogbmV2ZXI7XG4gIHRpbGVMb2FkRnVuY3Rpb24/OiBuZXZlcjtcbiAgZm9ybWF0PzogbmV2ZXI7XG59XG5cbmludGVyZmFjZSBNZXRhZGF0YSB7XG4gIG1pbnpvb206IG51bWJlcjtcbiAgbWF4em9vbTogbnVtYmVyO1xufVxuXG4vKipcbiAqIEEgdGlsZSBzb3VyY2UgaW4gYSByZW1vdGUgLm1idGlsZXMgZmlsZSBhY2Nlc3NpYmxlIGJ5IEhUVFBcbiAqL1xuZXhwb3J0IGNsYXNzIE1CVGlsZXNTb3VyY2UgZXh0ZW5kcyBWZWN0b3JUaWxlU291cmNlIHtcbiAgcHJpdmF0ZSB3b3JrZXI6IFByb21pc2U8V29ya2VySHR0cHZmcz5bXTtcbiAgcHJpdmF0ZSBjdXJyZW50V29ya2VyOiBudW1iZXI7XG4gIG1ldGFkYXRhOiBQcm9taXNlPE1ldGFkYXRhIHwgbnVsbD47XG4gIHN0YXRpYyB3b3JrZXJVcmwgPSBuZXcgVVJMKFxuICAgICdzcWwuanMtaHR0cHZmcy9kaXN0L3NxbGl0ZS53b3JrZXIuanMnLFxuICAgIGltcG9ydC5tZXRhLnVybCxcbiAgKTtcbiAgc3RhdGljIHdhc21VcmwgPSBuZXcgVVJMKFxuICAgICdzcWwuanMtaHR0cHZmcy9kaXN0L3NxbC13YXNtLndhc20nLFxuICAgIGltcG9ydC5tZXRhLnVybCxcbiAgKTsgXG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogT3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB1cmw6IHVuZGVmaW5lZCxcbiAgICAgIGZvcm1hdDogbmV3IE1CVGlsZXNGb3JtYXQoe1xuICAgICAgICBsYXllcnM6IG9wdGlvbnMubGF5ZXJzXG4gICAgICB9KSxcbiAgICAgIC8vIFRoaXMgaXMgcmVxdWlyZWQgdG8gcHJldmVudCBPcGVubGF5ZXJzJyBjYWNoZSBmcm9tIHRoaW5raW5nIHRoYXQgYWxsIHRpbGVzIHNoYXJlIHRoZSBzYW1lIFVSTFxuICAgICAgdGlsZVVybEZ1bmN0aW9uOiAoY29vcmRzOiBUaWxlQ29vcmQpID0+IGAke2Nvb3Jkc1swXX06JHtjb29yZHNbMV19OiR7Y29vcmRzWzJdfWBcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0VGlsZUxvYWRGdW5jdGlvbih0aGlzLnRpbGVMb2FkZXIuYmluZCh0aGlzKSk7XG5cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBmcm9tOiAnaW5saW5lJyxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICBzZXJ2ZXJNb2RlOiAnZnVsbCcsXG4gICAgICAgIHJlcXVlc3RDaHVua1NpemU6IDEwMjQsXG4gICAgICAgIHVybDogb3B0aW9ucy51cmxcbiAgICAgIH1cbiAgICB9IGFzIFNwbGl0RmlsZUNvbmZpZ1B1cmU7XG5cbiAgICB0aGlzLndvcmtlciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKG9wdGlvbnMuc3FsV29ya2VycyA/PyA0KTsgaSsrKSB7XG4gICAgICB0aGlzLndvcmtlcltpXSA9IHNxbGh0dHAuY3JlYXRlRGJXb3JrZXIoXG4gICAgICAgIFtjb25maWddLFxuICAgICAgICBNQlRpbGVzU291cmNlLndvcmtlclVybC50b1N0cmluZygpLFxuICAgICAgICBNQlRpbGVzU291cmNlLndhc21VcmwudG9TdHJpbmcoKSxcbiAgICAgICAgb3B0aW9ucy5tYXhTaW5nbGVUcmFuc2ZlciA/PyAxMDI0ICogMTAyNCAqIDEwXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRXb3JrZXIgPSAwO1xuXG4gICAgdGhpcy5tZXRhZGF0YSA9IHRoaXMud29ya2VyWyh0aGlzLmN1cnJlbnRXb3JrZXIrKykgJSB0aGlzLndvcmtlci5sZW5ndGhdXG4gICAgICAudGhlbigodykgPT4gdy5kYi5xdWVyeSgnU0VMRUNUIG5hbWUsdmFsdWUgRlJPTSBtZXRhZGF0YSBXSEVSRSBuYW1lPVwibWF4em9vbVwiIG9yIG5hbWU9XCJtaW56b29tXCInKSlcbiAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgIC8vIEFsYXMsIGF0IHRoZSBtb21lbnQgaXQgaXMgbm90IHBvc3NpYmxlIHRvIHJlcGxhY2UgdGhlIFRpbGVHcmlkIGFmdGVyIGNvbnN0cnVjdGluZyB0aGUgbGF5ZXJcbiAgICAgICAgaWYgKHIgJiYgci5sZW5ndGggPT0gMikge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSByLnJlZHVjZSgoYSwgeCkgPT4ge1xuICAgICAgICAgICAgYVt4WyduYW1lJ11dID0geFsndmFsdWUnXTtcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgIH0sIHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0xvYWRlZCBtZXRhZGF0YScsIGRhdGEpO1xuICAgICAgICAgIGlmIChvcHRpb25zLm1heFpvb20gIT0gZGF0YS5tYXh6b29tIHx8IG9wdGlvbnMubWluWm9vbSAhPSBkYXRhLm1pbnpvb20pIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgbWluWm9vbS9tYXhab29tICR7ZGF0YS5taW56b29tfS8ke2RhdGEubWF4em9vbX1gICtcbiAgICAgICAgICAgICAgYCBvZiByZXRyaWV2ZWQgTUJUaWxlcyBkbyBub3QgbWF0Y2ggT3BlbmxheWVycyBjb25maWd1cmF0aW9uICR7b3B0aW9ucy5taW5ab29tfS8ke29wdGlvbnMubWF4Wm9vbX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGRhdGEgYXMgdW5rbm93biBhcyBNZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBsb2FkIG1ldGFkYXRhJyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHRpbGVMb2FkZXIodGlsZTogVmVjdG9yVGlsZSwgX3VybDogc3RyaW5nKSB7XG4gICAgY29uc29sZS5kZWJ1ZygnbG9hZGluZyB0aWxlJywgW3RpbGUudGlsZUNvb3JkWzBdLCB0aWxlLnRpbGVDb29yZFsxXSwgdGlsZS50aWxlQ29vcmRbMl1dKTtcbiAgICB0aWxlLnNldExvYWRlcigoZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSA9PiB7XG4gICAgICB0aGlzLndvcmtlclsodGhpcy5jdXJyZW50V29ya2VyKyspICUgdGhpcy53b3JrZXIubGVuZ3RoXVxuICAgICAgICAudGhlbigodykgPT5cbiAgICAgICAgICB3LmRiLnF1ZXJ5KFxuICAgICAgICAgICAgJ1NFTEVDVCB0aWxlX2RhdGEgRlJPTSB0aWxlcyBXSEVSRSB6b29tX2xldmVsID0gPyBBTkQgdGlsZV9jb2x1bW4gPSA/IEFORCB0aWxlX3JvdyA9ID8nLFxuICAgICAgICAgICAgW3RpbGUudGlsZUNvb3JkWzBdLCB0aWxlLnRpbGVDb29yZFsxXSwgKDEgPDwgdGlsZS50aWxlQ29vcmRbMF0pIC0gMSAtIHRpbGUudGlsZUNvb3JkWzJdXVxuICAgICAgICAgICkpXG4gICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgaWYgKHIgJiYgclswXSAmJiByWzBdWyd0aWxlX2RhdGEnXSkge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gdGlsZS5nZXRGb3JtYXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVzID0gZm9ybWF0LnJlYWRGZWF0dXJlcyhyWzBdWyd0aWxlX2RhdGEnXSwge1xuICAgICAgICAgICAgICBleHRlbnQsXG4gICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBwcm9qZWN0aW9uXG4gICAgICAgICAgICB9KSBhcyBGZWF0dXJlPEdlb21ldHJ5PltdO1xuICAgICAgICAgICAgdGlsZS5zZXRGZWF0dXJlcyhmZWF0dXJlcyk7XG4gICAgICAgICAgICB0aWxlLm9uTG9hZChmZWF0dXJlcywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gZGF0YSBmb3IgJHt0aWxlLnRpbGVDb29yZH1gKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgICAgIHRpbGUub25FcnJvcigpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgZm9yIChjb25zdCB3b3JrZXIgb2YgdGhpcy53b3JrZXIpIHtcbiAgICAgIHdvcmtlci50aGVuKCh3KSA9PiB7XG4gICAgICAgIHcucmVsZWFzZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL09TTVxuICovXG5cbmltcG9ydCBYWVogZnJvbSAnLi9YWVouanMnO1xuXG4vKipcbiAqIFRoZSBhdHRyaWJ1dGlvbiBjb250YWluaW5nIGEgbGluayB0byB0aGUgT3BlblN0cmVldE1hcCBDb3B5cmlnaHQgYW5kIExpY2Vuc2VcbiAqIHBhZ2UuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBBVFRSSUJVVElPTiA9XG4gICcmIzE2OTsgJyArXG4gICc8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCIgdGFyZ2V0PVwiX2JsYW5rXCI+T3BlblN0cmVldE1hcDwvYT4gJyArXG4gICdjb250cmlidXRvcnMuJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luPSdhbm9ueW1vdXMnXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT10cnVlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogbGluZWFyIGludGVycG9sYXRpb24gaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuICBTZXQgdG8gZmFsc2UgdG8gdXNlIHRoZSBuZWFyZXN0IG5laWdoYm9yIGluc3RlYWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MTldIE1heCB6b29tLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPXRydWVdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybD0naHR0cHM6Ly90aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZyddIFVSTCB0ZW1wbGF0ZS5cbiAqIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLCBhbmQgYHt6fWAgcGxhY2Vob2xkZXJzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aGUgT3BlblN0cmVldE1hcCB0aWxlIHNlcnZlci5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgT1NNIGV4dGVuZHMgWFlaIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wZW4gU3RyZWV0IE1hcCBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgbGV0IGF0dHJpYnV0aW9ucztcbiAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYXR0cmlidXRpb25zID0gb3B0aW9ucy5hdHRyaWJ1dGlvbnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF0dHJpYnV0aW9ucyA9IFtBVFRSSUJVVElPTl07XG4gICAgfVxuXG4gICAgY29uc3QgY3Jvc3NPcmlnaW4gPVxuICAgICAgb3B0aW9ucy5jcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jcm9zc09yaWdpbiA6ICdhbm9ueW1vdXMnO1xuXG4gICAgY29uc3QgdXJsID1cbiAgICAgIG9wdGlvbnMudXJsICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLnVybFxuICAgICAgICA6ICdodHRwczovL3RpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJztcblxuICAgIHN1cGVyKHtcbiAgICAgIGF0dHJpYnV0aW9uczogYXR0cmlidXRpb25zLFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IGZhbHNlLFxuICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgIGNyb3NzT3JpZ2luOiBjcm9zc09yaWdpbixcbiAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAgbWF4Wm9vbTogb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFpvb20gOiAxOSxcbiAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhcXVlIDogdHJ1ZSxcbiAgICAgIHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOiBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLFxuICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBPU007XG4iXSwibmFtZXMiOlsidGFyZ2V0IiwibGF5ZXJzIiwic291cmNlIiwidXJsIiwic3R5bGUiLCJ2aWV3IiwiY2VudGVyIiwiem9vbSIsInN0eWxlVG93biIsInNpemUiLCJmZWF0dXJlIiwid2lkdGgiLCJmb250IiwiY29sb3IxIiwiaW1hZ2UiLCJmaWxsIiwiY29sb3IiLCJyYWRpdXMiLCJzdHJva2UiLCJ0ZXh0IiwiZ2V0Iiwic3R5bGVCb3JkZXIiLCJyb2FkU3R5bGVDYWNoZSIsInJvYWRDb2xvciIsImJ1aWxkaW5nU3R5bGUiLCJ3YXRlclN0eWxlIiwiYm91bmRhcnlTdHlsZSIsInJvYWRTdHlsZSIsImtpbmQiLCJyYWlsd2F5Iiwic29ydF9rZXkiLCJzdHlsZUtleSIsInpJbmRleCIsInBsYWNlQmFzZSIsInRleHRTdHJva2UiLCJwbGFjZVN0eWxlIiwiY2xvbmUiLCJzZXRUZXh0Iiwib2Zmc2V0WSIsIk1CVGlsZXNGb3JtYXQiLCJGZWF0dXJlIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwic3VwZXIiLCJ0aGlzIiwiZGF0YVByb2plY3Rpb24iLCJQcm9qZWN0aW9uIiwiY29kZSIsInVuaXRzIiwiZmVhdHVyZUNsYXNzXyIsImZlYXR1cmVDbGFzcyIsImdlb21ldHJ5TmFtZV8iLCJnZW9tZXRyeU5hbWUiLCJsYXllcnNfIiwiaWRQcm9wZXJ0eV8iLCJpZFByb3BlcnR5IiwiZXh0ZW50Iiwic3VwcG9ydGVkTWVkaWFUeXBlcyIsInJlYWRGZWF0dXJlIiwicHJvcGVydGllcyIsImlkIiwicG9pbnRzIiwibG9hZEdlb21ldHJ5IiwiZmxhdENvb3JkaW5hdGVzIiwiZW5kcyIsInR5cGUiLCJNQlR5cGVzIiwibGVuZ3RoIiwiaSIsImoiLCJwdXNoIiwieCIsInkiLCJ0cmFuc2Zvcm0iLCJyZWFkRmVhdHVyZXMiLCJmZWF0dXJlcyIsInRpbGUiLCJWZWN0b3JUaWxlIiwiYWRhcHRPcHRpb25zIiwic2V0V29ybGRFeHRlbnQiLCJzZXRFeHRlbnQiLCJsYXllck5hbWUiLCJPYmplY3QiLCJrZXlzIiwiaW5jbHVkZXMiLCJsIiwiaWR4IiwidmVjdG9yRmVhdHVyZSIsImdldFByb3BlcnRpZXMiLCJsYXllciIsInJlYWRQcm9qZWN0aW9uIiwibW9ubyIsIm11bHRpIiwic3FsaHR0cCIsIk1CVGlsZXNTb3VyY2UiLCJ1bmRlZmluZWQiLCJmb3JtYXQiLCJ0aWxlVXJsRnVuY3Rpb24iLCJjb29yZHMiLCJzZXRUaWxlTG9hZEZ1bmN0aW9uIiwidGlsZUxvYWRlciIsImJpbmQiLCJjb25maWciLCJmcm9tIiwic2VydmVyTW9kZSIsInJlcXVlc3RDaHVua1NpemUiLCJ3b3JrZXIiLCJzcWxXb3JrZXJzIiwiY3JlYXRlRGJXb3JrZXIiLCJ3b3JrZXJVcmwiLCJ0b1N0cmluZyIsIndhc21VcmwiLCJtYXhTaW5nbGVUcmFuc2ZlciIsImN1cnJlbnRXb3JrZXIiLCJtZXRhZGF0YSIsInRoZW4iLCJ3IiwiZGIiLCJxdWVyeSIsInIiLCJkYXRhIiwicmVkdWNlIiwiYSIsImNvbnNvbGUiLCJkZWJ1ZyIsIm1heFpvb20iLCJtYXh6b29tIiwibWluWm9vbSIsIm1pbnpvb20iLCJ3YXJuIiwiRXJyb3IiLCJjYXRjaCIsImUiLCJfdXJsIiwidGlsZUNvb3JkIiwic2V0TG9hZGVyIiwicmVzb2x1dGlvbiIsInByb2plY3Rpb24iLCJnZXRGb3JtYXQiLCJmZWF0dXJlUHJvamVjdGlvbiIsInNldEZlYXR1cmVzIiwib25Mb2FkIiwib25FcnJvciIsImRlc3Ryb3kiLCJyZWxlYXNlIiwiVVJMIiwiT1NNIiwiYXR0cmlidXRpb25zIiwiY3Jvc3NPcmlnaW4iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsImNhY2hlU2l6ZSIsImludGVycG9sYXRlIiwib3BhcXVlIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJ0aWxlTG9hZEZ1bmN0aW9uIiwidHJhbnNpdGlvbiIsIndyYXBYIiwiekRpcmVjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=